# chat-bitbucket

#WORKINPROGRESS

**This bot is able to give you info about [BitBucket](https://bitbucket.org) PR on a [Google Hangouts Chat](https://chat.google.com/) room.**

chat-bitbucket is a chat bot built on the [Hubot][hubot] framework. It was
initially generated by [generator-hubot][generator-hubot], and configured to be
deployed on [Heroku][heroku]-like to get you up and running as quick as possible.



This README is intended to help get you started. Definitely update and improve
to talk about your own instance, how to use and deploy, what functionality is
available, etc!

[heroku]: http://www.heroku.com
[hubot]: http://hubot.github.com
[generator-hubot]: https://github.com/github/generator-hubot

### Running chat-bitbucket Locally

You can test your hubot by running the following, however some plugins will not
behave as expected unless the [environment variables](#configuration) they rely
upon have been set.

You can start myhubot locally by running:

    % bin/hubot

You'll see some start up output and a prompt:

    [Sat Feb 28 2015 12:38:27 GMT+0000 (GMT)] INFO Using default redis on localhost:6379
    myhubot>

Then you can interact with myhubot by typing `myhubot help`.

    myhubot> myhubot help
    myhubot animate me <query> - The same thing as `image me`, except adds [snip]
    myhubot help - Displays all of the help commands that myhubot knows about.
    ...

To run with the adapter Hangouts Chat:

    % npm start

### Deploying to Dokku

Create the app on dokku and push it

```
git remote add dokku dokku@dokkuhost:appname
git push dokku master
```

Add letencrypt plugin to server https

On dokku host:

```
dokku plugin:install https://github.com/dokku/dokku-letsencrypt.git
dokku config:set --no-restart appname DOKKU_LETSENCRYPT_EMAIL=myemail
dokku letsencrypt appname
```

Follow google-hangouts-chat publish procedure [here](https://developers.google.com/hangouts/chat/how-tos/bots-publish)

You will have to use Bot URL = ``https://appname.dokkuhost``

Activate webhook in BitBucket

- Go yo project settings in bitbucket
- Webhooks
- Add
- Trigger on all PR actions
- URL : ``https://appname.dokkuhost/hubot/bitbucket-pr?room={room_id}``

## Thanks

- [Hubot](https://hubot.github.com/)
- [Hubot Hangout Chat Adapter](https://github.com/gsuitedevs/hubot-google-hangouts-chat)
- [Hubot Script BitBucket PR](https://github.com/hubot-scripts/hubot-bitbucket-pr)